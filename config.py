# -*- coding: utf-8 -*- 

"""
config.py
ูุญุชูู ูุฐุง ุงูููู ุนูู ุงูุซูุงุจุช ูุงูุฅุนุฏุงุฏุงุช ุงูุนุงูุฉ ููุชุทุจูู
"""

from pathlib import Path
from resource_helper import get_working_path

# ุชุฑุฌูุงุช ุงููุตูุต ุงููุณุชุฎุฏูุฉ ูู ุงูุชุทุจูู
TRANSLATIONS = {
    "ar": dict(sorted({
        "about": "ุญูู",
        "adhan_sound_file": "ููู ุตูุช ุงูุฃุฐุงู",
        "all_files": "ุฌููุน ุงููููุงุช",
        "app_error": "ุฎุทุฃ ูู ุงูุชุทุจูู",
        "app_running_in_background": "ุงูุชุทุจูู ูุนูู ูู ุงูุฎูููุฉ",
        "app_running_in_background_message": "ูุง ูุฒุงู ุงูุชุทุจูู ูุนูู. ุงููุฑ ุนูู ุงูุฃููููุฉ ูู ุดุฑูุท ุงูููุงู ูุฅุธูุงุฑู.",
        "app_settings": "ุฅุนุฏุงุฏุงุช ุงูุชุทุจูู",
        "app_title": "๐ ููุงููุช ุงูุตูุงุฉ",
        "arabic": "ุงูุนุฑุจูุฉ",
        "asr": "ุงูุนุตุฑ",
        "audio_files": "ูููุงุช ุงูุตูุช",
        "auto_update_interval": "ูุชุฑุฉ ุงูุชุญุฏูุซ ุงูุชููุงุฆู (ุซูุงูู)",
        "browse": "ุชุตูุญ",
        "cancel": "ุฅูุบุงุก",
        "city": "ุงููุฏููุฉ ",
        "city_en_name": "ุงููุฏููุฉ (ุงุณู ุฅูุฌููุฒู):",
        "connected": "ูุชุตู",
        "confirm": "ุชุฃููุฏ",
        "confirm_restore_defaults": "ูู ุชุฑูุฏ ุงุณุชุนุงุฏุฉ ุฌููุน ุงูุฅุนุฏุงุฏุงุช ุงูุงูุชุฑุงุถูุฉุ",
        "confirm_restore_and_restart": "ุณูุชู ุงุณุชุนุงุฏุฉ ุงูุฅุนุฏุงุฏุงุช ุงูุงูุชุฑุงุถูุฉ ูุฅุนุงุฏุฉ ุชุดุบูู ุงูุชุทุจูู",
        "connection_error": "ุฎุทุฃ ูู ุงูุงุชุตุงู",
        "continue_later": "ุงููุชุงุจุนุฉ ูุงุญูุงู",
        "country": "ุงูุฏููุฉ ",
        "country_en_name": "ุงูุฏููุฉ (ุงุณู ุฅูุฌููุฒู):",
        "current_time_label": "๐ ุงูููุช ุงูุญุงูู {time_str}",
        "custom_sound_file": "ููู ุงูุตูุช ุงููุฎุตุต",
        "dark": "ุฏุงูู",
        "date_label": "๐ ุงูุชุงุฑูุฎ {date_str}",
        "degrees": "ุฏุฑุฌุฉ",
        "direction": "ุงูุงุชุฌุงู",
        "direction_is": "ุงูุงุชุฌุงู {direction_name}",
        "direction_label": "ุงูุงุชุฌุงู: --- ุฏุฑุฌุฉ",
        "disconnected": "ุบูุฑ ูุชุตู",
        "dhuhr": "ุงูุธูุฑ",
        "enable_adhan_sounds": "ุชูุนูู ุฃุตูุงุช ุงูุฃุฐุงู",
        "enable_notifications": "ุชูุนูู ุงูุฅุดุนุงุฑุงุช",
        "english": "English",
        "error": "ุฎุทุฃ",
        "error_opening_settings": "ุญุฏุซ ุฎุทุฃ ูู ูุชุญ ูุงูุฐุฉ ุงูุฅุนุฏุงุฏุงุช",
        "failed_to_fetch_data": "ูุดู ูู ุฌูุจ ุงูุจูุงูุงุช",
        "fajr": "ุงููุฌุฑ",
        "fatal_app_error": "ุญุฏุซ ุฎุทุฃ ูุงุฏุญ",
        "fatal_error": "ุฎุทุฃ ูุงุฏุญ",
        "finished": "ุงูุชูุช โ",
        "free_for_the_sake_of_allah": "ูุฌุงูุงู ููุฌู ุงููู ุชุนุงูู",
        "general": "ุนุงู",
        "hour": "ุณุงุนุฉ",
        "isha": "ุงูุนุดุงุก",
        "its_time_for_prayer": "ุญุงู ุงูุขู ููุช ุฃุฐุงู {prayer_name}",
        "language": "ุงููุบุฉ",
        "last_update": "ุขุฎุฑ ุชุญุฏูุซ",
        "light": "ูุงุชุญ",
        "loading_prayer_times": "...ุฌุงุฑู ุชุญููู ููุงููุช ุงูุตูุงุฉ โณ",
        "location": "๐ ุงููููุน",
        "location_settings_title": "ุชุญุฏูุฏ ุงููููุน (ุณูุชู ุชุทุจููู ุนูุฏ ุฅุนุงุฏุฉ ุงูุชุดุบูู)",
        "logo_not_found": "ูู ูุชู ุงูุนุซูุฑ ุนูู ุงูุดุนุงุฑ",
        "maghrib": "ุงููุบุฑุจ",
        "minute": "ุฏูููุฉ",
        "minutes_remaining_for_prayer": "ูุชุจูู {minutes} ุฏูุงุฆู ุนูู ุฃุฐุงู {prayer_name}",
        "no_cities": "ูุง ุชูุฌุฏ ูุฏู",
        "no_server_response": "ูุง ููุฌุฏ ุงุณุชุฌุงุจุฉ ูู ุงูุฎุงุฏู",
        "no_sound_file_selected": "ูู ูุชู ุชุญุฏูุฏ ููู ุตูุชู",
        "notifications": "ุงูุฅุดุนุงุฑุงุช",
        "notification_before_prayer": "ุงูุฅุดุนุงุฑ ูุจู ุงูุฃุฐุงู (ุฏูุงุฆู)",
        "notification_sound_file": "ููู ุตูุช ุงูุชูุจูู",
        "now": "ุงูุขู โฐ",
        "play": "ุชุดุบูู",
        "please_select_city_country": "ุงูุฑุฌุงุก ุชุญุฏูุฏ ุงููุฏููุฉ ูุงูุฏููุฉ ุฃููุงู ูู ุงูุฅุนุฏุงุฏุงุช",
        "prayer_calculation_method": "ุทุฑููุฉ ุญุณุงุจ ููุงููุช ุงูุตูุงุฉ",
        "prayer_notification_alert": "ุชูุจูู ููููุช ุงูุตูุงุฉ",
        "prayer_status_finished": "ุงูุชูุช โ",
        "prayer_status_now": "ุงูุขู โฐ",
        "prayer_status_upcoming": "ูุงุฏูุฉ",
        "prayer_status_within_hour": "ุฎูุงู {time_diff}ุฏ",
        "prayer_time": "ููุช ุงูุตูุงุฉ",
        "prayer_times": "ููุงููุช ุงูุตูุงุฉ",
        "prayer_times_for_city": "ููุงููุช ุงูุตูุงุฉ ููุฏููุฉ",
        "prayer_times_program": "ุจุฑูุงูุฌ ููุงููุช ุงูุตูุงุฉ",
        "prayer_times_table_title": "๐ ููุงููุช ุงูุตูุงุฉ",
        "prayer_times_updated_successfully": "ุชู ุชุญุฏูุซ ููุงููุช ุงูุตูุงุฉ ุจูุฌุงุญ",
        "programmed_by": "ุจุฑูุฌุฉ : ูุญููุฏ ูุตุงุฑ",
        "qibla": "ุงููุจูุฉ",
        "qibla_direction": "๐งญ ุงุชุฌุงู ุงููุจูุฉ",
        "qibla_direction_label": "ุงูุงุชุฌุงู {direction:.1f}ยฐ",
        "qibla_angle_from_north": "ุฒุงููุฉ ุงููุจูุฉ ูู ุงูุดูุงู",
        "set_arrow_towards_north": "ุงุถุจุท ุงุชุฌุงู ุงูุณูู ุงูุฃุญูุฑ ูุญู ุงูุดูุงู ุงูุฌุบุฑุงูู",
        "qibla_info": "ูุนูููุงุช",
        "qibla_info_text": "        โข ูุชู ุญุณุงุจ ุงุชุฌุงู ุงููุจูุฉ ุจูุงุกู ุนูู ูููุน ุงููุฏููุฉ ุงููุฎุชุงุฑุฉ โข\n        โข ุงูุงุชุฌุงู ูุญุณูุจ ุจุงููุณุจุฉ ููุดูุงู ุงูุฌุบุฑุงููโข\n        โข ููุญุตูู ุนูู ุฏูุฉ ุฃูุจุฑุ ุชุฃูุฏ ูู ุงุชุตุงูู ุจุงูุฅูุชุฑูุช โข\n        ",
        "remaining_time_on": "ุงูููุช ุงููุชุจูู ุนูู",
        "restart_now": "ุฅุนุงุฏุฉ ุงูุชุดุบูู ุงูุขู",
        "restart_required": "ุฅุนุงุฏุฉ ุงูุชุดุบูู ูุทููุจุฉ",
        "restore_defaults": "ุงุณุชุนุงุฏุฉ ุงูุงูุชุฑุงุถู",
        "save": "ุญูุธ",
        "saved_successfully": "ุชู ุงูุญูุธ",
        "searching": "ุฌุงุฑู ุงูุจุญุซ...",
        "select_adhan_file": "ุงุฎุชุฑ ููู ุงูุฃุฐุงู",
        "settings": "โ๏ธ ุฅุนุฏุงุฏุงุช",
        "settings_saved_successfully": "ุชู ุชุบููุฑ ุงูุฅุนุฏุงุฏุงุช. ุฅุถุบุท ูุฅุนุงุฏุฉ ุงูุชุดุบูู ุฃู ุงูุงุณุชูุฑุงุฑ ุญุงููุง ูุณูุชู ุชุทุจูู ุงูุฅุนุฏุงุฏุงุช ุนูุฏ ุฅุนุงุฏุฉ ุงูุชุดุบูู",
        "settings_saved_successfully_restart": "ุชู ุญูุธ ุงูุฅุนุฏุงุฏุงุชุ ุจุนุถ ุงูุชุบููุฑุงุช ุชุชุทูุจ ุฅุนุงุฏุฉ ุชุดุบูู ุงูุชุทุจูู ูุชูุนูููุง.\nูู ุชุฑูุฏ ุฅุนุงุฏุฉ ุงูุชุดุบูู ุงูุขูุ",
        "show_qibla_direction": "ุฅุธูุงุฑ ุงุชุฌุงู ุงููุจูุฉ",
        "show_window": "ุฅุธูุงุฑ",
        "sounds": "ุงูุฃุตูุงุช",
        "stop": "ุฅููุงู",
        "sunrise": "ุงูุดุฑูู",
        "table_header_prayer": "ุงูุตูุงุฉ",
        "table_header_status": "ุงูุญุงูุฉ",
        "table_header_time": "ุงูููุช",
        "theme": "ุงููุธูุฑ",
        "undefined": "ุบูุฑ ูุญุฏุฏ",
        "upcoming": "ูุงุฏูุฉ",
        "update": "ุชุญุฏูุซ",
        "updated_successfully": "ุชู ุงูุชุญุฏูุซ",
        "version": "ุงูุฅุตุฏุงุฑ",
        "version_label": "ุงูุฅุตุฏุงุฑ : {version}",
        "volume": "ูุณุชูู ุงูุตูุช",
        "quit": "ุฎุฑูุฌ",
        "exit_confirmation": "ุชุฃููุฏ ุงูุฎุฑูุฌ",
        "exit_confirmation_message": "ูู ุฃูุช ูุชุฃูุฏ ุฃูู ุชุฑูุฏ ุงูุฎุฑูุฌ ูู ุงูุชุทุจููุ",
        "no": "ูุง",
        "yes": "ูุนู"
    }.items())),
    "en": dict(sorted({
        "about": "About",
        "adhan_sound_file": "Adhan Sound File",
        "all_files": "All Files",
        "app_error": "Application Error",
        "app_running_in_background": "Application is running in the background",
        "app_running_in_background_message": "The application is still running. Click the tray icon to show it.",
        "app_settings": "Application Settings",
        "app_title": "๐ Prayer Times",
        "arabic": "ุงูุนุฑุจูุฉ",
        "asr": "Asr",
        "audio_files": "Audio Files",
        "auto_update_interval": "Auto Update Interval (seconds)",
        "browse": "Browse",
        "cancel": "Cancel",
        "city": "City ",
        "city_en_name": "City (English name):",
        "connected": "Connected",
        "confirm": "Confirm",
        "confirm_restore_defaults": "Are you sure you want to restore all default settings?",
        "confirm_restore_and_restart": "Default settings will be restored and the application will be restarted",
        "connection_error": "Connection error",
        "continue_later": "Continue Later",
        "country": "Country ",
        "country_en_name": "Country (English name):",
        "current_time_label": "๐ Current Time {time_str}",
        "custom_sound_file": "Custom Sound File",
        "dark": "Dark",
        "date_label": "๐ Date {date_str}",
        "degrees": "degrees",
        "direction": "Direction",
        "direction_is": "Direction {direction_name}",
        "direction_label": "Direction: --- degrees",
        "disconnected": "Disconnected",
        "dhuhr": "Dhuhr",
        "enable_adhan_sounds": "Enable Adhan Sounds",
        "enable_notifications": "Enable Notifications",
        "english": "English",
        "error": "Error",
        "error_opening_settings": "Error opening settings window",
        "failed_to_fetch_data": "Failed to fetch data",
        "fajr": "Fajr",
        "fatal_app_error": "A fatal error occurred",
        "fatal_error": "Fatal Error",
        "finished": "Finished โ",
        "free_for_the_sake_of_allah": "Free for the sake of Allah",
        "general": "General",
        "hour": "hour",
        "isha": "Isha",
        "its_time_for_prayer": "It's time for {prayer_name} prayer",
        "language": "Language",
        "last_update": "Last update",
        "light": "Light",
        "loading_prayer_times": "โณ Loading prayer times...",
        "location": "๐ Location",
        "location_settings_title": "Set Location (applies on restart)",
        "logo_not_found": "Logo not found",
        "maghrib": "Maghrib",
        "minute": "minute",
        "minutes_remaining_for_prayer": "{minutes} minutes remaining for {prayer_name} prayer",
        "no_cities": "No cities found",
        "no_server_response": "No response from server",
        "no_sound_file_selected": "No sound file selected",
        "notifications": "Notifications",
        "notification_before_prayer": "Notify before prayer (minutes)",
        "notification_sound_file": "Notification Sound File",
        "now": "Now โฐ",
        "play": "Play",
        "please_select_city_country": "Please select the city and country first in the settings.",
        "prayer_calculation_method": "Prayer Times Calculation Method",
        "prayer_notification_alert": "Prayer Time Alert",
        "prayer_status_finished": "Finished โ",
        "prayer_status_now": "Now โฐ",
        "prayer_status_upcoming": "Upcoming",
        "prayer_status_within_hour": "In {time_diff} min",
        "prayer_time": "Prayer Time",
        "prayer_times": "Prayer Times",
        "prayer_times_for_city": "Prayer times for",
        "prayer_times_program": "Prayer Times Program",
        "prayer_times_table_title": "๐ Prayer Times",
        "prayer_times_updated_successfully": "Prayer times updated successfully",
        "programmed_by": "Programmed by: Mahmoud Nassar",
        "qibla": "Qibla",
        "qibla_direction": "๐งญ Qibla Direction",
        "qibla_direction_label": "Direction {direction:.1f}ยฐ",
        "qibla_angle_from_north": "Qibla angle from North",
        "set_arrow_towards_north": "Set the red arrow towards the geographic North",
        "qibla_info": "Information",
        "qibla_info_text": "        โข Qibla direction is calculated based on the selected city's location.\n        โข The direction is calculated relative to True North.\n        โข For better accuracy, ensure you are connected to the internet.\n        ",
        "remaining_time_on": "Time remaining for",
        "restart_now": "Restart Now",
        "restart_required": "Restart Required",
        "restore_defaults": "Restore Defaults",
        "save": "Save",
        "saved_successfully": "Saved",
        "searching": "Searching...",
        "select_adhan_file": "Select Adhan File",
        "settings": "โ๏ธ Settings",
        "settings_saved_successfully": "Settings have been changed. Click to restart or continue and settings will be applied on restart.",
        "settings_saved_successfully_restart": "Settings saved. Some changes require a restart to take effect.\nDo you want to restart now?",
        "show_qibla_direction": "Show Qibla Direction",
        "show_window": "Show",
        "sounds": "Sounds",
        "stop": "Stop",
        "sunrise": "Sunrise",
        "table_header_prayer": "Prayer",
        "table_header_status": "Status",
        "table_header_time": "Time",
        "theme": "Theme",
        "undefined": "Undefined",
        "upcoming": "Upcoming",
        "update": "Update",
        "updated_successfully": "Updated",
        "version": "Version",
        "version_label": "Version: {version}",
        "volume": "Volume",
        "quit": "Quit",
        "exit_confirmation": "Exit Confirmation",
        "exit_confirmation_message": "Are you sure you want to exit the application?",
        "no": "No",
        "yes": "Yes"
    }.items()))
}


# ุทุฑู ุญุณุงุจ ููุงููุช ุงูุตูุงุฉ
CALCULATION_METHODS = {
    "ุฌุงูุนุฉ ุงูุนููู ุงูุฅุณูุงููุฉ - ูุฑุงุชุดู": 1,
    "ุงูุฌูุนูุฉ ุงูุฅุณูุงููุฉ ูุฃูุฑููุง ุงูุดูุงููุฉ": 2,
    "ุฑุงุจุทุฉ ุงูุนุงูู ุงูุฅุณูุงูู": 3,
    "ุฃู ุงููุฑู - ููุฉ ุงูููุฑูุฉ": 4,
    "ุงูููุฆุฉ ุงููุตุฑูุฉ ุงูุนุงูุฉ ูููุณุงุญุฉ": 5,
    "ุฌุงูุนุฉ ุทูุฑุงู ููุนููู": 7,
    "ูุนูุฏ ุงูุฌููููุฒูุงุก - ุฌุงูุนุฉ ุทูุฑุงู": 8,
    "ุงูุฎููุฌ - ุฏููุฉ ุงูุฅูุงุฑุงุช": 9,
    "ุงููููุช": 10,
    "ูุทุฑ": 11,
    "ูุฌูุณ ุงูุดูุฑู ุงูุฅุณูุงูู ุงูุฃุนูู - ุงูุฌุฒุงุฆุฑ": 12,
    "ูุฑูุณุง - ุงุชุญุงุฏ ุงูููุธูุงุช ุงูุฅุณูุงููุฉ": 13,
    "ุชุฑููุง - ุฑุฆุงุณุฉ ุงูุดุคูู ุงูุฏูููุฉ": 14,
    "ุฑูุณูุง - ุงููุฌูุณ ุงูุฏููู": 15
}
CALCULATION_METHODS_REV = {v: k for k, v in CALCULATION_METHODS.items()}

CALCULATION_METHODS_EN = {
    "University of Islamic Sciences, Karachi": 1,
    "Islamic Society of North America": 2,
    "Muslim World League": 3,
    "Umm Al-Qura University, Makkah": 4,
    "Egyptian General Authority of Survey": 5,
    "University of Tehran": 7,
    "Institute of Geophysics, University of Tehran": 8,
    "Gulf Region": 9,
    "Kuwait": 10,
    "Qatar": 11,
    "Algerian Ministry of Religious Affairs and Wakfs": 12,
    "Union of Islamic Organisations of France": 13,
    "Presidency of Religious Affairs, Turkey": 14,
    "Spiritual Administration of Muslims of Russia": 15
}
CALCULATION_METHODS_EN_REV = {v: k for k, v in CALCULATION_METHODS_EN.items()}

# ุชุญุฏูุฏ ุงููุณุงุฑ ุงูุฌุฐุฑู ูููุดุฑูุน ูุถูุงู ุงุณุชููุงููุฉ ุงููุณุงุฑุงุช
APP_DATA_DIR = Path(get_working_path('.'))

# ุงููุณุงุฑุงุช ูููููุงุช ูุงููุฌูุฏุงุช ุงูุฑุฆูุณูุฉ
SETTINGS_FILE = APP_DATA_DIR / 'settings.json'
CACHE_DIR = APP_DATA_DIR / 'cache'
LOG_DIR = APP_DATA_DIR / 'logs'
LOG_FILE = LOG_DIR / 'prayer_app.log'
COUNTRIES_FILE = APP_DATA_DIR / 'countries.json'
COUNTRIES_CACHE_FILE = CACHE_DIR / 'countries.json'
CITIES_CACHE_DIR = CACHE_DIR / 'cities_cache'
WORLD_CITIES_DIR = APP_DATA_DIR / 'world_cities'
SOUNDS_DIR = APP_DATA_DIR / 'sounds'

# ุชุฃูุฏ ูู ูุฌูุฏ ูุฌูุฏุงุช ุงูุชุฎุฒูู ุงููุคูุช ูุงูุณุฌูุงุช
CACHE_DIR.mkdir(exist_ok=True)
CITIES_CACHE_DIR.mkdir(exist_ok=True)
LOG_DIR.mkdir(exist_ok=True)

class Translator:
    def __init__(self, language="ar"):
        self.language = language
        if language not in TRANSLATIONS:
            self.language = "en"

    def set_language(self, language):
        if language in TRANSLATIONS:
            self.language = language

    def get(self, key, **kwargs):
        translation = TRANSLATIONS.get(self.language, {}).get(key, key)
        if kwargs:
            return translation.format(**kwargs)
        return translation
