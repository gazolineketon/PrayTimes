# 🕌 مواقيت الصلاة - PrayTimes

<div align="center">

[![Python](https://img.shields.io/badge/Python-3.7+-blue.svg)](https://python.org)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)
[![Version](https://img.shields.io/badge/Version-0.37.0-orange.svg)](CHANGELOG.md)

**تطبيق متكامل لحساب مواقيت الصلاة وعرضها مع مميزات متقدمة**

*A comprehensive prayer times calculation and display application with advanced features*

</div>

## 📋 وصف المشروع

تطبيق "مواقيت الصلاة" هو برنامج مكتوب بلغة بايثون يقوم بحساب مواقيت الصلاة الخمس (الفجر، الظهر، العصر، المغرب، العشاء) بدقة عالية بناءً على الموقع الجغرافي للمستخدم. يتميز بواجهة رسومية عربية احترافية وسهلة الاستخدام مع دعم كامل للغة العربية.

**PrayTimes** is a Python-based application that accurately calculates the five daily prayer times (Fajr, Dhuhr, Asr, Maghrib, Isha) based on the user's geographic location. It features a professional and user-friendly Arabic interface with full Arabic language support.

## ✨ المميزات الرئيسية

### 🕐 حساب دقيق للمواقيت
- حساب مواقيت الصلاة الخمس بدقة عالية
- دعم جميع طرق الحساب المعتمدة (الهيئة المصرية، أم القرى، الخ)
- حساب وقت الشروق والغروب
- ضبط تلقائي للتوقيت الصيفي

### 📍 تحديد الموقع
- قاعدة بيانات شاملة للمدن حول العالم
- إمكانية اختيار المدينة يدوياً
- عرض إحداثيات الموقع ومنطقة الزمن

### 🔔 نظام الإشعارات
- تنبيهات قبل كل صلاة (قابلة للتخصيص)
- تشغيل أذان عند دخول وقت الصلاة
- دعم ملفات الأذان المخصصة
- إمكانية إيقاف/تشغيل الإشعارات

### 🧭 اتجاه القبلة
- حساب دقيق لاتجاه القبلة بالدرجات
- بوصلة رسومية توضح الاتجاه
- حساب الزاوية بين اتجاه القبلة والشمال الحقيقي

### 🎨 واجهة مستخدم عربية
- تصميم حديث وجذاب بلغة العربية
- دعم الوضع الليلي/النهاري
- قابل للتخصيص الكامل
- سهل الاستخدام لجميع الفئات العمرية

### 📊 إحصائيات وتحليلات
- عرض الوقت المتبقي للصلاة التالية
- إحصائيات شهرية للصلاة
- سجل الصلوات (قيد التطوير)

## 🚀 التثبيت والتشغيل

### المتطلبات الأساسية

- Python 3.7 أو أحدث
- Windows 10/11 (مع دعم تجريبي للأنظمة الأخرى)

### التبعيات والمكتبات المطلوبة

يتطلب التطبيق المكتبات التالية (يتم تثبيتها تلقائياً عبر requirements.txt):

#### المكتبات الأساسية:
- **requests>=2.25.1** - لطلبات HTTP وجلب البيانات من الإنترنت
- **pytz>=2021.1** - لإدارة المناطق الزمنية
- **ntplib>=0.4.0** - لمزامنة الوقت مع خوادم NTP

#### مكتبات الواجهة الرسومية:
- **Pillow>=8.0.0** - لمعالجة الصور والصور المصغرة
- **pystray>=0.19.0** - لإنشاء أيقونة في شريط النظام

#### مكتبات الإشعارات والصوت:
- **plyer>=2.1.0** - لإظهار الإشعارات على مختلف الأنظمة
- **playsound>=1.3.0** - لتشغيل الأصوات (الأذان)
- **win10toast-persist>=0.3** - للإشعارات المتقدمة على Windows (اختياري)

#### أدوات التطوير:
- **pyinstaller>=5.0** - لإنشاء ملفات تنفيذية مستقلة

### التثبيت من الكود المصدري

```bash
# استنساخ المشروع
git clone https://github.com/your-username/PrayTimes.git
cd PrayTimes

# تثبيت المتطلبات
pip install -r requirements.txt

# تشغيل التطبيق
python main.py
```

### التثبيت باستخدام الملف التنفيذي

1. انتقل إلى [Releases](https://github.com/your-username/PrayTimes/releases)
2. حمل أحدث إصدار لنظام التشغيل الخاص بك
3. قم بتشغيل الملف التنفيذي مباشرة

## 🛠️ التطوير

### هيكل المشروع

'''
PrayTimes/
├── 📁 .git/               # مستودع Git
├── 📁 .vscode/            # إعدادات VS Code
│   ├── extensions.json
│   └── settings.json
├── 📁 __pycache__/        # ملفات بايثون المؤقتة
├── 📁 build/              # ملفات البناء عند إنشاء التنفيذي
│   └── main/
├── 📁 cache/              # ملفات التخزين المؤقت
├── 📁 dist/               # الملفات التنفيذية النهائية
│   └── main/
├── 📁 logs/               # سجلات التطبيق
│   └── praytimes.log
├── 📁 sounds/             # ملفات الأصوات
│   ├── adhan_mekka.wma
│   └── notification.wav
├── 📁 world_cities/       # قاعدة بيانات المدن
│   └── ...
│
├── 🐍 config.py           # الإعدادات والثوابت العامة
├── 🐍 data_manager.py     # إدارة البيانات والملفات
├── 🐍 main.py             # نقطة الدخول الرئيسية للتطبيق
├── 🐍 main_app_ui.py      # واجهة المستخدم الرئيسية
├── 🐍 media_manager.py    # إدارة الوسائط والأصوات
├── 🐍 prayer_logic.py     # منطق حساب الصلاة والمواقيت
├── 🐍 qibla_ui.py         # واجهة حساب اتجاه القبلة
├── 🐍 resource_helper.py  # مساعدة في إدارة الموارد
├── 🐍 restart.py          # أداة إعادة تشغيل التطبيق
├── 🐍 settings_manager.py # إدارة إعدادات المستخدم
├── 🐍 test_resources.py   # اختبارات الموارد
├── 🐍 ui_components.py    # مكونات واجهة المستخدم
├── 🐍 update_version.py   # أداة تحديث الإصدار
│
├── 📄 countries.json      # قاعدة بيانات الدول
├── 📄 README.md           # هذا الملف
│
├── 🖼️ pray_logo.png       # شعار التطبيق
└── 🖼️ pray_times.ico      # أيقونة التطبيق
'''

### وصف الملفات والمجلدات

#### 📁 المجلدات الرئيسية:
- **sounds/**: يحتوي على جميع ملفات الصوت المستخدمة في التطبيق (الأذان، التنبيهات)
- **world_cities/**: قاعدة بيانات JSON تحتوي على معلومات المدن حسب الدول
- **logs/**: مجلد تخزين سجلات التطبيق لمتابعة الأخطاء والأحداث
- **cache/**: مجلد التخزين المؤقت للبيانات
- **build/** و **dist/**: مجلدات مؤقتة تُنشأ عند بناء الملف التنفيذي

#### 🐍 الملفات الأساسية:
- **main.py**: نقطة الدخول الرئيسية، يبدأ التطبيق من هنا
- **main_app_ui.py**: يحتوي على واجهة المستخدم الرئيسية باستخدام tkinter
- **prayer_logic.py**: يحتوي على خوارزميات حساب مواقيت الصلاة
- **qibla_ui.py**: واجهة حساب اتجاه القبلة والبوصلة
- **config.py**: جميع الثوابت والإعدادات الثابتة
- **settings_manager.py**: إدارة حفظ واسترجاع إعدادات المستخدم
- **data_manager.py**: إدارة البيانات الجغرافية وملفات JSON
- **media_manager.py**: إدارة تشغيل الأصوات والإشعارات
- **resource_helper.py**: أدوات مساعدة للتعامل مع مسارات الملفات

#### 📄 ملفات البيانات:
- **countries.json**: قائمة الدول والمدن مع إحداثياتها
- **settings.json**: إعدادات المستخدم المحفوظة (المدينة، طريقة الحساب، إلخ)
- **requirements.txt**: قائمة المكتبات المطلوبة لتشغيل التطبيق

#### 🖼️ ملفات الوسائط:
- **pray_logo.png**: شعار التطبيق الرئيسي
- **pray_times.ico**: أيقونة التطبيق لشريط المهام

### المتطلبات

```txt
pytz>=2021.1          # التعامل مع المناطق الزمنية
plyer>=2.1.0          # الإشعارات عبر الأنظمة المختلفة
ntplib>=0.4.0         # مزامنة الوقت عبر الإنترنت
pyinstaller>=5.0      # إنشاء ملفات تنفيذية
```

### البناء من الكود المصدري

```bash
# إنشاء ملف تنفيذي لنظام Windows
pyinstaller main.spec

# الملف النهائي سيكون في مجلد dist/
```

## ⚙️ الإعدادات

### ملف الإعدادات (settings.json)

يتم حفظ جميع الإعدادات في ملف `settings.json` ويتضمن:

- الموقع الجغرافي (المدينة، الدولة)
- طريقة حساب الصلاة
- إعدادات الإشعارات
- ملفات الأذان المخصصة
- إعدادات الواجهة

### التخصيص

- يمكن تغيير ملف الأذان من الإعدادات
- إمكانية تخصيص وقت التنبيه قبل كل صلاة
- تغيير لغة العرض (العربية فقط حالياً)
- تخصيص مظهر التطبيق

## 🐛 استكشاف الأخطاء

### المشاكل الشائعة

1. **عدم ظهور الإشعارات**
   - تأكد من تثبيت مكتبة `plyer`
   - تحقق من إعدادات الإشعارات في النظام

2. **عدم دقة المواقيت**
   - تحقق من صحة الموقع الجغرافي
   - تأكد من ضبط التوقيت الصيفي
   - تحقق من اتصال الإنترنت لمزامنة الوقت

3. **مشاكل في ملفات الصوت**
   - تأكد من وجود ملفات الصوت في مجلد sounds/
   - تحقق من صيغة الملفات (MP3, WAV)

### السجلات

يتم تسجيل جميع الأحداث والأخطاء في ملف `logs/praytimes.log` للمساعدة في استكشاف المشاكل.

## 📈 خطة التطوير

### المميزات المخططة

- [ ] واجهة ويب متوافقة مع الجوال
- [ ] تطبيق Android و iOS
- [ ] وضع أذكار الصباح والمساء
- [ ] دعم الحج والعمرة
- [ ] إضافة دعم لغة أخرى

### المساهمة

نرحب بجميع المساهمات! يرجى:

1. فتح issue لوصف المشكلة أو الميزة الجديدة
2. إنشاء فرع جديد للتطوير
3. تقديم pull request مع وصف واضح
4. التأكد من اختبار التغييرات جيداً

## 📄 الترخيص

هذا المشروع مرخص تحت [MIT License](LICENSE). يمكنك استخدامه وتعديله وتوزيعه بحرية.

## 🤝 الدعم

- 🐛 **الإبلاغ عن الأخطاء**: [Issues](https://github.com/your-username/PrayTimes/issues)
- 💡 **اقتراح مميزات**: [Discussions](https://github.com/your-username/PrayTimes/discussions)
- 📧 **التواصل المباشر**: [Email](mailto:your-email@example.com)

## 🙏 الشكر والتقدير

- شكر خاص لجميع المساهمين في المكتبات المفتوحة المصدر المستخدمة
- شكراً للمجتمع الإسلامي على الدعم والتشجيع
- جزى الله خيراً كل من ساهم في اختبار التطبيق

---

<div align="center">

**نسأل الله أن يتقبل منا ومنكم صالح الأعمال**

*Made with ❤️ for the Muslim community*

</div>
